<!DOCTYPE html>
<html>

<head>
	<title>Constellation Creator</title>
	<link rel="stylesheet" type="text/css" href="css/site.css">
</head>

<body>
	<main>

		<div class="game-screen-wrapper nobg">

			<div class="game-screen" >
				<h3 id="cassiopeia-header">Cassiopeia</h3>
				<p id="draw-instructions">Redesign the stars! To draw, click and hold, drag and release.</p>
				<div id="page-contents">
					<canvas class="draw-container" id="canvas-cassiopeia"></canvas>
					<div id="buttons">
						<a class="small-button" href="pick-constellation.html">BACK</a>
						<a class="small-button" id="clear">CLEAR</a>
					</div>
					<form>
						<label for="users-form-input">Name Your Constellation:</label>
						<input type="text" id="users-form-input">
						<a class="small-button" id="submit">SUBMIT</a>
					</form>

				</div>
			</div>

			<div id="about">
				<h2>About the Game</h2>
				<p>This game is...</p>
				<h2>About the Author</h2>
				<p>Emma created this for her senior project...</p>
			</div>
	
		</div>




	</main>

	<script>
		const canvas = document.getElementById("canvas-cassiopeia");
		const btnClear = document.getElementById("clear");
		const ctx = canvas.getContext("2d");
		const inputName = document.getElementById("users-form-input");
		const usersFormInput = document.querySelector("form");

		console.log("form", usersFormInput);

		canvas.width = 500;
		canvas.height = 500;

		canvas.addEventListener('mousedown', beginDraw);
		canvas.addEventListener('mouseup', endDraw);
		btnClear.addEventListener("click", clearCanvas);
		//inputName.addEventListener("input", displayNewName);
		usersFormInput.addEventListener("submit", displayNewName)

		ctx.lineCap = 'round';
		ctx.lineWidth = 4;
		ctx.strokeStyle = "#000";

		function beginDraw(e) {
			ctx.beginPath();
			ctx.moveTo(e.offsetX, e.offsetY);
		}

		function endDraw(e) {
			ctx.lineTo(e.offsetX, e.offsetY);
			ctx.stroke();
		}

		function clearCanvas() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
		}

		function displayNewName(e) {
			e.preventDefault();
			console.log("Form submitted");
			
			// Check if inputName is correctly referencing the input element
			console.log("inputName element:", inputName);

			let name = inputName.value;
			console.log("inputName value=", name);

			const cassiopeiaReplacement = document.getElementById('cassiopeia-header');
			console.log("cassiopeiaReplacement element:", cassiopeiaReplacement);

			cassiopeiaReplacement.innerHTML = name;
		}

	</script>
</body>

</html>